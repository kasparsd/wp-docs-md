{
    "id": 18145,
    "date": "2025-06-12T00:42:42",
    "date_gmt": "2025-06-12T00:42:42",
    "guid": {
        "rendered": "https://make.wordpress.org/cli/handbook/internal-api/wp-cli-add-command/"
    },
    "modified": "2025-07-01T12:55:38",
    "modified_gmt": "2025-07-01T12:55:38",
    "slug": "wp-cli-add-command",
    "status": "publish",
    "type": "handbook",
    "link": "https://make.wordpress.org/cli/handbook/references/internal-api/wp-cli-add-command/",
    "title": {
        "rendered": "WP_CLI::add_command()"
    },
    "content": {
        "rendered": "<p>Register a command to <span tabindex='0' class='glossary-item-container'>WP-CLI<span class='glossary-item-hidden-content'><span class='glossary-item-header'>WP-CLI</span> <span class='glossary-item-description'>WP-CLI is the Command Line Interface for WordPress, used to do administrative and development tasks in a programmatic way. The project page is <a href=\"http://wp-cli.org/\">http://wp-cli.org/</a> <a href=\"https://make.wordpress.org/cli/\">https://make.wordpress.org/cli/</a></span></span></span>.</p>\n<hr>\n<h2>Usage</h2>\n<pre><code>WP_CLI::add_command( $name, $callable, $args = [] )\n</code></pre>\n<div>\n<strong>$name</strong> (string) Name for the command (e.g. \u201cpost list\u201d or \u201csite empty\u201d).<br>\n<strong>$callable</strong> (callable|object|string) Command implementation as a class, function or closure.<br>\n<strong>$args</strong> (array) {<br>   Optional. An associative array with additional registration parameters.<br>   @type callable $before_invoke Callback to execute before invoking the command.<br>   @type callable $after_invoke  Callback to execute after invoking the command.<br>   @type string   $shortdesc     Short description (80 char or less) for the command.<br>   @type string   $longdesc      Description of arbitrary length for examples, etc.<br>   @type string   $synopsis      The synopsis for the command (string or array).<br>   @type string   $when          Execute callback on a named WP-CLI hook (e.g. before_wp_load).<br>   @type bool     $is_deferred   Whether the command addition had already been deferred.<br>}<br>\n<strong>@return</strong> (bool) on success, false if deferred, hard error if registration failed.\n</div>\n<hr>\n<h2>Notes</h2>\n<p>WP-CLI supports using any callable class, function, or closure as a<br>\ncommand. <code>WP_CLI::add_command()</code> is used for both internal and<br>\nthird-party command registration.</p>\n<p>Command arguments are parsed from PHPDoc by default, but also can be<br>\nsupplied as an optional third argument during registration.</p>\n<pre><code># Register a custom 'foo' command to output a supplied positional param.\n#\n# $ wp foo bar --append=qux\n# Success: bar qux\n\n/**\n * My awesome closure command\n *\n * &lt;message&gt;\n * : An awesome message to display\n *\n * --append=&lt;message&gt;\n * : An awesome message to append to the original message.\n *\n * @when before_wp_load\n */\n$foo = function( $args, $assoc_args ) {\n    WP_CLI::success( $args[0] . ' ' . $assoc_args['append'] );\n};\nWP_CLI::add_command( 'foo', $foo );\n</code></pre>\n<p><em>Internal <span tabindex='0' class='glossary-item-container'>API<span class='glossary-item-hidden-content'><span class='glossary-item-header'>API</span> <span class='glossary-item-description'>An API or Application Programming Interface is a software intermediary that allows programs to interact with each other and share data in limited, clearly defined ways.</span></span></span> documentation is generated from the WP-CLI codebase on every release. To suggest improvements, please submit a pull request.</em></p>\n<hr>\n<h2>Related</h2>\n<ul>\n<li><strong><a href=\"https://make.wordpress.org/cli/handbook/internal-api/wp-cli-add-hook/\">WP_CLI::add_hook()</a></strong> \u2013 Schedule a callback to be executed at a certain point.</li>\n<li><strong><a href=\"https://make.wordpress.org/cli/handbook/internal-api/wp-cli-do-hook/\">WP_CLI::do_hook()</a></strong> \u2013 Execute callbacks registered to a given hook.</li>\n<li><strong><a href=\"https://make.wordpress.org/cli/handbook/internal-api/wp-cli-add-wp-hook/\">WP_CLI::add_wp_hook()</a></strong> \u2013 Add a callback to a WordPress action or <span tabindex='0' class='glossary-item-container'>filter<span class='glossary-item-hidden-content'><span class='glossary-item-header'>Filter</span> <span class='glossary-item-description'>Filters are one of the two types of Hooks <a href=\"https://codex.wordpress.org/Plugin_API/Hooks\">https://codex.wordpress.org/Plugin_API/Hooks</a>. They provide a way for functions to modify data of other functions. They are the counterpart to Actions. Unlike Actions, filters are meant to work in an isolated manner, and should never have side effects such as affecting global variables and output.</span></span></span>.</li>\n</ul>\n<nav class='o2-post-footer-actions'><ul class='o2-post-footer-action-row'></ul><div class='o2-post-footer-action-likes'></div><ul class='o2-post-footer-action-row'></ul></nav>",
        "protected": false
    },
    "author": 0,
    "featured_media": 0,
    "parent": 18132,
    "menu_order": 0,
    "template": "",
    "meta": {
        "jetpack_post_was_ever_published": false,
        "footnotes": ""
    },
    "class_list": [
        "post-18145",
        "handbook",
        "type-handbook",
        "status-publish",
        "hentry"
    ],
    "revision_note": "",
    "jetpack_sharing_enabled": true,
    "_links": {
        "self": [
            {
                "href": "https://make.wordpress.org/cli/wp-json/wp/v2/handbook/18145",
                "targetHints": {
                    "allow": [
                        "GET"
                    ]
                }
            }
        ],
        "collection": [
            {
                "href": "https://make.wordpress.org/cli/wp-json/wp/v2/handbook"
            }
        ],
        "about": [
            {
                "href": "https://make.wordpress.org/cli/wp-json/wp/v2/types/handbook"
            }
        ],
        "version-history": [
            {
                "count": 1,
                "href": "https://make.wordpress.org/cli/wp-json/wp/v2/handbook/18145/revisions"
            }
        ],
        "predecessor-version": [
            {
                "id": 18320,
                "href": "https://make.wordpress.org/cli/wp-json/wp/v2/handbook/18145/revisions/18320"
            }
        ],
        "up": [
            {
                "embeddable": true,
                "href": "https://make.wordpress.org/cli/wp-json/wp/v2/handbook/18132"
            }
        ],
        "wp:attachment": [
            {
                "href": "https://make.wordpress.org/cli/wp-json/wp/v2/media?parent=18145"
            }
        ],
        "curies": [
            {
                "name": "wp",
                "href": "https://api.w.org/{rel}",
                "templated": true
            }
        ]
    }
}
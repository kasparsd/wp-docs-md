{
    "id": 135628,
    "date": "2021-04-21T15:39:48",
    "date_gmt": "2021-04-21T15:39:48",
    "guid": {
        "rendered": "https://developer.wordpress.org/block-editor/reference-guides/block-api/block-variations/"
    },
    "modified": "2025-02-18T18:49:10",
    "modified_gmt": "2025-02-18T18:49:10",
    "slug": "block-variations",
    "status": "publish",
    "type": "blocks-handbook",
    "link": "https://developer.wordpress.org/block-editor/reference-guides/block-api/block-variations/",
    "title": {
        "rendered": "Variations"
    },
    "content": {
        "rendered": "<p>The Block Variations API allows you to define multiple versions (variations) of a block. A block variation differs from the original block by a set of initial attributes or inner blocks. When you insert the block variation into the Editor, these attributes and/or inner blocks are applied.</p>\n<p>Variations are an excellent way to create iterations of existing blocks without building entirely new blocks from scratch.</p>\n<p>To better understand this API, consider the Embed block. This block contains numerous variations for each type of embeddable content (WordPress, Youtube, etc.). Each Embed block variation shares the same underlying functionality for editing, saving, and so on. Besides the name and descriptive information, the main difference is the <code>providerNameSlug</code> attribute. Below is a simplified example of the variations in the Embed block. View the <a href=\"https://github.com/WordPress/gutenberg/blob/trunk/packages/block-library/src/embed/variations.js\">source code</a> for the complete specification.</p>\n<pre><code class=\"language-js\">variations: [\n    {\n        name: 'wordpress',\n        title: 'WordPress',\n        description: __( 'Embed a WordPress post.' ),\n        attributes: { providerNameSlug: 'wordpress' },\n    },\n    {\n        name: 'youtube',\n        title: 'YouTube',\n        description: __( 'Embed a YouTube video.' ),\n        attributes: { providerNameSlug: 'youtube' },\n    },\n],\n</code></pre>\n<h2>Defining a block variation</h2>\n<p>A block variation is defined by an object that can contain the following fields:</p>\n<ul>\n<li><code>name</code> (type <code>string</code>) \u2013 A unique and machine-readable name.</li>\n<li><code>title</code> (optional, type <code>string</code>) \u2013 A human-readable variation title.</li>\n<li><code>description</code> (optional, type <code>string</code>) \u2013 A human-readable variation description.</li>\n<li><code>category</code> (optional, type <code>string</code>) &#8211; A category classification used in search interfaces to arrange block types by category.</li>\n<li><code>keywords</code> (optional, type <code>string[]</code>) &#8211; An array of terms (which can be translated) that help users discover the variation while searching.</li>\n<li><code>icon</code> (optional, type <code>string</code> | <code>Object</code>) \u2013 An icon helping to visualize the variation. It can have the same shape as the block type.</li>\n<li><code>attributes</code> (optional, type <code>Object</code>) \u2013 Values that override block attributes.</li>\n<li><code>innerBlocks</code> (optional, type <code>Array[]</code>) \u2013 Initial configuration of nested blocks.</li>\n<li><code>example</code> (optional, type <code>Object</code>) \u2013 Provides structured data for the block preview. Set to <code>undefined</code> to disable the preview. See the <a href=\"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/#example-optional\">Block Registration API</a> for more details.</li>\n<li><code>scope</code> (optional, type <code>WPBlockVariationScope[]</code>) &#8211; Defaults to <code>block</code> and <code>inserter</code>. The list of scopes where the variation is applicable. Available options include:\n<ul>\n<li><code>block</code> &#8211; Used by blocks to filter specific block variations. <code>Columns</code> and <code>Query</code> blocks have such variations, which are passed to the <a href=\"https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-variation-picker/README.md\">experimental BlockVariationPicker</a> component. This component handles displaying the variations and allows users to choose one of them.</li>\n<li><code>inserter</code> &#8211; Block variation is shown on the inserter.</li>\n<li><code>transform</code> &#8211; Block variation is shown in the component for variation transformations.</li>\n</ul>\n</li>\n<li><code>isDefault</code> (optional, type <code>boolean</code>) \u2013 Defaults to <code>false</code>. Indicates whether the current variation is the default one (details below).</li>\n<li><code>isActive</code> (optional, type <code>Function|string[]</code>) &#8211; A function or an array of block attributes that is used to determine if the variation is active when the block is selected. The function accepts <code>blockAttributes</code> and <code>variationAttributes</code> (details below).</li>\n</ul>\n<div class=\"callout callout-info\">\n    You can technically create a block variation without a unique <code>name</code>, but this is <strong>not</strong> recommended. A unique <code>name</code> allows the Editor to differentiate between your variation and others that may exist. It also allows your variation to be unregistered as needed and has implications for the <code>isDefault</code> settings (details below).\n</div>\n<h2>Creating a block variation</h2>\n<p>Block variations can be declared during a block&#8217;s registration by providing the <code>variations</code> key with a proper array of variation objects, as shown in the example above. See the <a href=\"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/\">Block Registration API</a> for more details.</p>\n<p>To create a variation for an existing block, such as a Core block, use <code>wp.blocks.registerBlockVariation()</code>. This function accepts the name of the block and the object defining the variation.</p>\n<pre><code class=\"language-js\">wp.blocks.registerBlockVariation( 'core/embed', {\n    name: 'custom-embed',\n    attributes: { providerNameSlug: 'custom' },\n} );\n</code></pre>\n<h2>Registering block variations in PHP</h2>\n<p>Block variations can also be registered from PHP using the <code>get_block_type_variations</code> filter hook. This approach is particularly useful when you need to dynamically generate variations based on registered post types, taxonomies, or other WordPress data.</p>\n<p>Here&#8217;s an example of how to register a custom variation for the <code>core/image</code> block:</p>\n<pre><code class=\"language-php\">function my_custom_image_variation( $variations, $block_type ) {\n    // Only modify variations for the image block\n    if ( 'core/image' !== $block_type-&gt;name ) {\n        return $variations;\n    }\n\n    // Add a custom variation\n    $variations[] = array(\n        'name'        =&gt; 'wide-image',\n        'title'       =&gt; __( 'Wide image', 'textdomain' ),\n        'description' =&gt; __( 'A wide image', 'textdomain' ),\n        'scope'       =&gt; array( 'inserter' ),\n        'isDefault'   =&gt; false,\n        'attributes'  =&gt; array(\n            'align' =&gt; 'wide', // Identifies the link type as custom\n        ),\n    );\n\n    return $variations;\n}\nadd_filter( 'get_block_type_variations', 'my_custom_image_variation', 10, 2 );\n</code></pre>\n<p>The <code>get_block_type_variations</code> filter is called when variations are requested for a block type. It receives two parameters:<br />\n&#8211; <code>$variations</code>: An array of currently registered variations for the block type<br />\n&#8211; <code>$block_type</code>: The full block type object</p>\n<p>Note that variations registered through PHP will be merged with any variations registered through JavaScript using <code>registerBlockVariation()</code>.</p>\n<div class=\"callout callout-info\">Check the <a href=\"https://developer.wordpress.org/news/2024/03/how-to-register-block-variations-with-php/\">How to register block variations with PHP</a> blog post for more info about this</div>\n<h2>Removing a block variation</h2>\n<p>Block variations can also be easily removed. To do so, use <code>wp.blocks.unregisterBlockVariation()</code>. This function accepts the name of the block and the <code>name</code> of the variation that should be unregistered.</p>\n<pre><code class=\"language-js\">wp.blocks.unregisterBlockVariation( 'core/embed', 'youtube' );\n</code></pre>\n<h2>Block variations versus block styles</h2>\n<p>The main difference between block styles and block variations is that a block style just applies a CSS class to the block, so it can be styled in an alternative way. See the <a href=\"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-styles/\">Block Styles API</a> for more details.</p>\n<p>If you want to apply initial attributes or inner blocks, this falls into block variation territory. It&#8217;s also possible to override the default block style using the <code>className</code> attribute when defining a block variation.</p>\n<pre><code class=\"language-js\">variations: [\n    {\n        name: 'blue',\n        title: __( 'Blue Quote' ),\n        isDefault: true,\n        attributes: {\n            color: 'blue',\n            className: 'is-style-blue-quote'\n        },\n        icon: 'format-quote',\n        isActive: ( blockAttributes, variationAttributes ) =&gt;\n            blockAttributes.color === variationAttributes.color\n    },\n],\n</code></pre>\n<h2>Using <code>isDefault</code></h2>\n<p>By default, all variations will show up in the Inserter in addition to the original block type item. However, setting the <code>isDefault</code> flag for any variations listed will override the regular block type in the Inserter. This is a great tool for curating the Editor experience to your specific needs.</p>\n<p>For example, if you want Media &amp; Text block to display the image on the right by default, you could create a variation like this:</p>\n<pre><code class=\"language-js\">wp.blocks.registerBlockVariation( 'core/media-text', {\n    name: 'media-text-media-right',\n    title: __( 'Media &amp; Text' ),\n    isDefault: true,\n    attributes: {\n        mediaPosition: 'right',\n    },\n} );\n</code></pre>\n<h3>Caveats to using <code>isDefault</code></h3>\n<p>While <code>isDefault</code> works great when overriding a block without existing variations, you may run into issues when other variations exist.</p>\n<p>If another variation for the same block uses <code>isDefault</code>, your variation will not necessarily become the default. The Editor respects the first registered variation with <code>isDefault</code>, which might not be yours.</p>\n<p>The solution is to unregister the other variation before registering your variation with <code>isDefault</code>. This caveat reinforces the recommendation always to provide variations with a unique <code>name</code>. Otherwise, the variation cannot be unregistered.</p>\n<h2>Using <code>isActive</code></h2>\n<p>While the <code>isActive</code> property is optional, it&#8217;s recommended. This API is used by the block editor to check which variation is active, and display the correct variation&#8217;s title, icon and description when an instance of the variation is selected in the editor.</p>\n<p>If <code>isActive</code> is not set, the Editor cannot distinguish between an instance of the original block and your variation, so the original block information will be displayed.</p>\n<p>The property can be set to either an array of strings (<code>string[]</code>), or a function. It is recommended to use the string array version whenever possible.</p>\n<p>The <code>string[]</code> version is used to declare which of the block instance&#8217;s attributes should be compared to the given variation&#8217;s. Each attribute will be checked and the variation will be active if all of them match.</p>\n<p>As an example, in the core Embed block, the <code>providerNameSlug</code> attribute is used to determine the embed provider (e.g. &#8216;youtube&#8217; or &#8216;twitter&#8217;). The variations may be declared like this:</p>\n<pre><code class=\"language-js\">const variations = [\n    {\n        name: 'twitter',\n        title: 'Twitter',\n        icon: embedTwitterIcon,\n        keywords: [ 'tweet', __( 'social' ) ],\n        description: __( 'Embed a tweet.' ),\n        patterns: [ /^https?:\\/\\/(www\\.)?twitter\\.com\\/.+/i ],\n        attributes: { providerNameSlug: 'twitter', responsive: true },\n    },\n    {\n        name: 'youtube',\n        title: 'YouTube',\n        icon: embedYouTubeIcon,\n        keywords: [ __( 'music' ), __( 'video' ) ],\n        description: __( 'Embed a YouTube video.' ),\n        patterns: [\n            /^https?:\\/\\/((m|www)\\.)?youtube\\.com\\/.+/i,\n            /^https?:\\/\\/youtu\\.be\\/.+/i,\n        ],\n        attributes: { providerNameSlug: 'youtube', responsive: true },\n    },\n    // ...\n];\n</code></pre>\n<p>The <code>isActive</code> property would then look like this:</p>\n<pre><code class=\"language-js\">isActive: [ 'providerNameSlug' ];\n</code></pre>\n<p>This will cause the block instance value for <code>providerNameSlug</code> to be compared to the value declared in the variation&#8217;s declaration (the values in the code snippet above) to determine which embed variation is active.</p>\n<p>Nested object paths are also supported since WordPress <code>6.6.0</code>. For example, consider a block variation that has a <code>query</code> object as an attribute. It is possible to determine if the variation is active solely based on that object&#8217;s <code>postType</code> property (while ignoring all its other properties):</p>\n<pre><code class=\"language-js\">isActive: [ 'query.postType' ];\n</code></pre>\n<p>The function version of this property accepts a block instance&#8217;s <code>blockAttributes</code> as the first argument, and the <code>variationAttributes</code> declared for a variation as the second argument. These arguments can be used to determine if a variation is active by comparing them and returning a <code>true</code> or <code>false</code> (indicating whether this variation is inactive for this block instance).</p>\n<p>Using the same example for the embed block, the function version would look like this:</p>\n<pre><code class=\"language-js\">isActive: ( blockAttributes, variationAttributes ) =&gt;\n    blockAttributes.providerNameSlug === variationAttributes.providerNameSlug,\n</code></pre>\n<h3>Specificity of <code>isActive</code> matches</h3>\n<p><em>Note: Improved handling since WordPress <code>6.6.0</code>.</em></p>\n<p>If there are multiple variations whose <code>isActive</code> check matches a given block instance, and all of them are string arrays, then the variation with the highest <em>specificity</em> will be chosen. Consider the following example:</p>\n<pre><code class=\"language-js\">wp.blocks.registerBlockVariation( 'core/paragraph', {\n    name: 'paragraph-red',\n    title: 'Red Paragraph',\n    attributes: {\n        textColor: 'vivid-red',\n    },\n    isActive: [ 'textColor' ],\n} );\n\nwp.blocks.registerBlockVariation( 'core/paragraph', {\n    name: 'paragraph-red-grey',\n    title: 'Red/Grey Paragraph',\n    attributes: {\n        textColor: 'vivid-red',\n        backgroundColor: 'cyan-bluish-gray',\n    },\n    isActive: [ 'textColor', 'backgroundColor' ],\n} );\n</code></pre>\n<p>If a block instance has attributes <code>textColor: vivid-red</code> and <code>backgroundColor: cyan-bluish-gray</code>, both variations&#8217; <code>isActive</code> criterion will match that block instance. In this case, the more <em>specific</em> match will be determined to be the active variation, where specificity is calculated as the length of each <code>isActive</code> array. This means that the <code>Red/Grey Paragraph</code> will be shown as the active variation.</p>\n<p>Note that specificity cannot be determined for a matching variation if its <code>isActive</code> property is a function rather than a <code>string[]</code>. In this case, the first matching variation will be determined to be the active variation. For this reason, it is generally recommended to use a <code>string[]</code> rather than a <code>function</code> for the <code>isActive</code> property.</p>\n",
        "protected": false
    },
    "author": 0,
    "featured_media": 0,
    "parent": 134406,
    "menu_order": 74,
    "template": "",
    "meta": {
        "footnotes": ""
    },
    "class_list": [
        "post-135628",
        "blocks-handbook",
        "type-blocks-handbook",
        "status-publish",
        "hentry",
        "type-handbook"
    ],
    "revision_note": "",
    "jetpack_sharing_enabled": true,
    "_links": {
        "self": [
            {
                "href": "https://developer.wordpress.org/wp-json/wp/v2/blocks-handbook/135628",
                "targetHints": {
                    "allow": [
                        "GET"
                    ]
                }
            }
        ],
        "collection": [
            {
                "href": "https://developer.wordpress.org/wp-json/wp/v2/blocks-handbook"
            }
        ],
        "about": [
            {
                "href": "https://developer.wordpress.org/wp-json/wp/v2/types/blocks-handbook"
            }
        ],
        "version-history": [
            {
                "count": 13,
                "href": "https://developer.wordpress.org/wp-json/wp/v2/blocks-handbook/135628/revisions"
            }
        ],
        "predecessor-version": [
            {
                "id": 156350,
                "href": "https://developer.wordpress.org/wp-json/wp/v2/blocks-handbook/135628/revisions/156350"
            }
        ],
        "up": [
            {
                "embeddable": true,
                "href": "https://developer.wordpress.org/wp-json/wp/v2/blocks-handbook/134406"
            }
        ],
        "wp:attachment": [
            {
                "href": "https://developer.wordpress.org/wp-json/wp/v2/media?parent=135628"
            }
        ],
        "curies": [
            {
                "name": "wp",
                "href": "https://api.w.org/{rel}",
                "templated": true
            }
        ]
    }
}
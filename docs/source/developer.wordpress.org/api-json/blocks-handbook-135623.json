{
    "id": 135623,
    "date": "2021-04-21T15:39:48",
    "date_gmt": "2021-04-21T15:39:48",
    "guid": {
        "rendered": "https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/"
    },
    "modified": "2024-10-30T16:55:05",
    "modified_gmt": "2024-10-30T16:55:05",
    "slug": "block-metadata",
    "status": "publish",
    "type": "blocks-handbook",
    "link": "https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/",
    "title": {
        "rendered": "Metadata in block.json"
    },
    "content": {
        "rendered": "<p>Starting with the WordPress 5.8 release, we recommend using the <code>block.json</code> metadata file as the canonical way to register block types with both PHP (server-side) and JavaScript (client-side). Here is an example <code>block.json</code> file that would define the metadata for a plugin create a notice block.</p>\n<p><strong>Example:</strong></p>\n<pre><code class=\"language-json\">{\n    \"$schema\": \"https://schemas.wp.org/trunk/block.json\",\n    \"apiVersion\": 3,\n    \"name\": \"my-plugin/notice\",\n    \"title\": \"Notice\",\n    \"category\": \"text\",\n    \"parent\": [ \"core/group\" ],\n    \"icon\": \"star\",\n    \"description\": \"Shows warning, error or success notices...\",\n    \"keywords\": [ \"alert\", \"message\" ],\n    \"version\": \"1.0.3\",\n    \"textdomain\": \"my-plugin\",\n    \"attributes\": {\n        \"message\": {\n            \"type\": \"string\",\n            \"source\": \"html\",\n            \"selector\": \".message\"\n        }\n    },\n    \"providesContext\": {\n        \"my-plugin/message\": \"message\"\n    },\n    \"usesContext\": [ \"groupId\" ],\n    \"selectors\": {\n        \"root\": \".wp-block-my-plugin-notice\"\n    },\n    \"supports\": {\n        \"align\": true\n    },\n    \"styles\": [\n        { \"name\": \"default\", \"label\": \"Default\", \"isDefault\": true },\n        { \"name\": \"other\", \"label\": \"Other\" }\n    ],\n    \"example\": {\n        \"attributes\": {\n            \"message\": \"This is a notice!\"\n        }\n    },\n    \"variations\": [\n        {\n            \"name\": \"example\",\n            \"title\": \"Example\",\n            \"attributes\": {\n                \"message\": \"This is an example!\"\n            }\n        }\n    ],\n    \"editorScript\": \"file:./index.js\",\n    \"script\": \"file:./script.js\",\n    \"viewScript\": [ \"file:./view.js\", \"example-shared-view-script\" ],\n    \"editorStyle\": \"file:./index.css\",\n    \"style\": [ \"file:./style.css\", \"example-shared-style\" ],\n    \"viewStyle\": [ \"file:./view.css\", \"example-view-style\" ],\n    \"render\": \"file:./render.php\"\n}\n</code></pre>\n<h2>Benefits of using the metadata file</h2>\n<p>The block definition allows code sharing between JavaScript, PHP, and other languages when processing block types stored as JSON, and registering blocks with the <code>block.json</code> metadata file provides multiple benefits on top of it.</p>\n<p>From a performance perspective, when themes support lazy loading assets, blocks registered with <code>block.json</code> will have their asset enqueuing optimized out of the box. The frontend CSS and JavaScript assets listed in the <code>style</code> or <code>script</code> properties will only be enqueued when the block is present on the page, resulting in reduced page sizes.</p>\n<p>Furthermore, because the <a href=\"https://developer.wordpress.org/rest-api/reference/block-types/\">Block Type REST API Endpoint</a> can only list blocks registered on the server, registering blocks server-side is recommended; using the <code>block.json</code> file simplifies this registration.</p>\n<p>The <a href=\"https://wordpress.org/plugins/\">WordPress Plugins Directory</a> can detect <code>block.json</code> files, highlight blocks included in plugins, and extract their metadata. If you wish to submit your block(s) to the Block Directory all blocks contained in your plugin must have a <code>block.json</code> file for the Block Directory to recognize them.</p>\n<p>Development is improved by using a defined schema definition file. Supported editors can provide help like tooltips, autocomplete, and schema validation. To use the schema, add the following to the top of the <code>block.json</code>.</p>\n<pre><code class=\"language-json\">\"$schema\": \"https://schemas.wp.org/trunk/block.json\"\n</code></pre>\n<div class=\"callout callout-info\">\nCheck <a href=\"https://developer.wordpress.org/block-editor/getting-started/fundamentals-block-development/registration-of-a-block\">Registration of a block</a> to learn more about how to register a block using its metadata.\n</div>\n<h2>Block API</h2>\n<p>This section describes all the properties that can be added to the <code>block.json</code> file to define the behavior and metadata of block types.</p>\n<h3>API version</h3>\n<ul>\n<li>Type: <code>number</code></li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>apiVersion</code></li>\n<li>Default: <code>1</code></li>\n</ul>\n<pre><code class=\"language-json\">{ \"apiVersion\": 3 }\n</code></pre>\n<p>The version of the Block API used by the block. The most recent version is <code>3</code> and it was introduced in WordPress 6.3.</p>\n<p>See <a href=\"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-api-versions/\">the API versions documentation</a> for more details.</p>\n<h3>Name</h3>\n<ul>\n<li>Type: <code>string</code></li>\n<li>Required</li>\n<li>Localized: No</li>\n<li>Property: <code>name</code></li>\n</ul>\n<pre><code class=\"language-json\">{ \"name\": \"core/heading\" }\n</code></pre>\n<p>The name for a block is a unique string that identifies a block. Names have to be structured as <code>namespace/block-name</code>, where namespace is the name of your plugin or theme.</p>\n<p><strong>Note:</strong> A block name can only contain lowercase alphanumeric characters, dashes, and at most one forward slash to designate the plugin-unique namespace prefix. It must begin with a letter.</p>\n<p><strong>Note:</strong> This name is used on the comment delimiters as <code>&lt;!-- wp:my-plugin/book --&gt;</code>. Block types in the <code>core</code> namespace do not include a namespace when serialized.</p>\n<h3>Title</h3>\n<ul>\n<li>Type: <code>string</code></li>\n<li>Required</li>\n<li>Localized: Yes</li>\n<li>Property: <code>title</code></li>\n</ul>\n<pre><code class=\"language-json\">{ \"title\": \"Heading\" }\n</code></pre>\n<p>This is the display title for your block, which can be translated with our translation functions. The title will display in the Inserter and in other areas of the editor.</p>\n<p><strong>Note:</strong> To keep your block titles readable and accessible in the UI, try to avoid very long titles.</p>\n<h3>Category</h3>\n<ul>\n<li>Type: <code>string</code></li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>category</code></li>\n</ul>\n<pre><code class=\"language-json\">{ \"category\": \"text\" }\n</code></pre>\n<p>Blocks are grouped into categories to help users browse and discover them.</p>\n<p>The core provided categories are:</p>\n<ul>\n<li>text</li>\n<li>media</li>\n<li>design</li>\n<li>widgets</li>\n<li>theme</li>\n<li>embed</li>\n</ul>\n<p>Plugins and Themes can also register <a href=\"https://developer.wordpress.org/block-editor/reference-guides/filters/block-filters/#managing-block-categories\">custom block categories</a>.</p>\n<p>An implementation should expect and tolerate unknown categories, providing some reasonable fallback behavior (e.g. a &#8220;text&#8221; category).</p>\n<h3>Parent</h3>\n<ul>\n<li>Type: <code>string[]</code></li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>parent</code></li>\n</ul>\n<pre><code class=\"language-json\">{ \"parent\": [ \"my-block/product\" ] }\n</code></pre>\n<p>Setting <code>parent</code> lets a block require that it is only available when nested within the specified blocks. For example, you might want to allow an &#8216;Add to Cart&#8217; block to only be available within a &#8216;Product&#8217; block.</p>\n<h3>Ancestor</h3>\n<ul>\n<li>Type: <code>string[]</code></li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>ancestor</code></li>\n<li>Since: <code>WordPress 6.0.0</code></li>\n</ul>\n<pre><code class=\"language-json\">{ \"ancestor\": [ \"my-block/product\" ] }\n</code></pre>\n<p>The <code>ancestor</code> property makes a block available inside the specified block types at any position of the ancestor block subtree. That allows, for example, to place a \u2018Comment Content\u2019 block inside a \u2018Column\u2019 block, as long as \u2018Column\u2019 is somewhere within a \u2018Comment Template\u2019 block. In comparison to the <code>parent</code> property blocks that specify their <code>ancestor</code> can be placed anywhere in the subtree whilst blocks with a specified <code>parent</code> need to be direct children.</p>\n<h3>Allowed Blocks</h3>\n<ul>\n<li>Type: <code>string[]</code></li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>allowedBlocks</code></li>\n<li>Since: <code>WordPress 6.5.0</code></li>\n</ul>\n<pre><code class=\"language-json\">{ \"allowedBlocks\": [ \"my-block/product\" ] }\n</code></pre>\n<p>The <code>allowedBlocks</code> specifies which block types can be the direct children of the block. For example, a \u2018List\u2019 block can allow only \u2018List Item\u2019 blocks as children.</p>\n<h3>Icon</h3>\n<ul>\n<li>Type: <code>string</code></li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>icon</code></li>\n</ul>\n<pre><code class=\"language-json\">{ \"icon\": \"smile\" }\n</code></pre>\n<p>An icon property should be specified to make it easier to identify a block. These can be any of <a href=\"https://developer.wordpress.org/resource/dashicons/\">WordPress&#8217; Dashicons</a> (slug serving also as a fallback in non-js contexts).</p>\n<p><strong>Note:</strong> It&#8217;s also possible to override this property on the client-side with the source of the SVG element. In addition, this property can be defined with JavaScript as an object containing background and foreground colors. These colors will appear with the icon when they are applicable e.g.: in the inserter. Custom SVG icons are automatically wrapped in the <a href=\"https://developer.wordpress.org/block-editor/reference-guide/packages/packages-primitives/\">wp.primitives.SVG</a> component to add accessibility attributes (aria-hidden, role, and focusable).</p>\n<h3>Description</h3>\n<ul>\n<li>Type: <code>string</code></li>\n<li>Optional</li>\n<li>Localized: Yes</li>\n<li>Property: <code>description</code></li>\n</ul>\n<pre><code class=\"language-json\">{\n    \"description\": \"Introduce new sections and organize content to help visitors\"\n}\n</code></pre>\n<p>This is a short description for your block, which can be translated with our translation functions. This will be shown in the block inspector.</p>\n<h3>Keywords</h3>\n<ul>\n<li>Type: <code>string[]</code></li>\n<li>Optional</li>\n<li>Localized: Yes</li>\n<li>Property: <code>keywords</code></li>\n<li>Default: <code>[]</code></li>\n</ul>\n<pre><code class=\"language-json\">{ \"keywords\": [ \"keyword1\", \"keyword2\" ] }\n</code></pre>\n<p>Sometimes a block could have aliases that help users discover it while searching. For example, an image block could also want to be discovered by photo. You can do so by providing an array of unlimited terms (which are translated).</p>\n<h3>Version</h3>\n<ul>\n<li>Type: <code>string</code></li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>version</code></li>\n<li>Since: <code>WordPress 5.8.0</code></li>\n</ul>\n<pre><code class=\"language-json\">{ \"version\": \"1.0.3\" }\n</code></pre>\n<p>The current version number of the block, such as 1.0 or 1.0.3. It&#8217;s similar to how plugins are versioned. This field might be used with block assets to control cache invalidation, and when the block author omits it, then the installed version of WordPress is used instead.</p>\n<h3>Text Domain</h3>\n<ul>\n<li>Type: <code>string</code></li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>textdomain</code></li>\n<li>Since: <code>WordPress 5.7.0</code></li>\n</ul>\n<pre><code class=\"language-json\">{ \"textdomain\": \"my-plugin\" }\n</code></pre>\n<p>The <a href=\"https://www.gnu.org/software/gettext/\">gettext</a> text domain of the plugin/block. More information can be found in the <a href=\"https://developer.wordpress.org/plugins/internationalization/how-to-internationalize-your-plugin/#text-domains\">Text Domain</a> section of the <a href=\"https://developer.wordpress.org/plugins/internationalization/how-to-internationalize-your-plugin/\">How to Internationalize your Plugin</a> page.</p>\n<h3>Attributes</h3>\n<ul>\n<li>Type: <code>object</code></li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>attributes</code></li>\n<li>Default: <code>{}</code></li>\n</ul>\n<pre><code class=\"language-json\">{\n    \"attributes\": {\n        \"cover\": {\n            \"type\": \"string\",\n            \"source\": \"attribute\",\n            \"selector\": \"img\",\n            \"attribute\": \"src\"\n        },\n        \"author\": {\n            \"type\": \"string\",\n            \"source\": \"html\",\n            \"selector\": \".book-author\"\n        }\n    }\n}\n</code></pre>\n<p>Attributes provide the structured data needs of a block. They can exist in different forms when they are serialized, but they are declared together under a common interface.</p>\n<p>See <a href=\"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-attributes/\">the attributes documentation</a> for more details.</p>\n<h3>Provides Context</h3>\n<ul>\n<li>Type: <code>object</code></li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>providesContext</code></li>\n<li>Default: <code>{}</code></li>\n</ul>\n<p>Context provided for available access by descendants of blocks of this type, in the form of an object which maps a context name to one of the block&#8217;s own attributes.</p>\n<p>See <a href=\"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-context/\">the block context documentation</a> for more details.</p>\n<pre><code class=\"language-json\">{\n    \"providesContext\": {\n        \"my-plugin/recordId\": \"recordId\"\n    }\n}\n</code></pre>\n<h3>Context</h3>\n<ul>\n<li>Type: <code>string[]</code></li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>usesContext</code></li>\n<li>Default: <code>[]</code></li>\n</ul>\n<p>Array of the names of context values to inherit from an ancestor provider.</p>\n<p>See <a href=\"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-context/\">the block context documentation</a> for more details.</p>\n<pre><code class=\"language-json\">{\n    \"usesContext\": [ \"message\" ]\n}\n</code></pre>\n<h3>Selectors</h3>\n<ul>\n<li>Type: <code>object</code></li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>selectors</code></li>\n<li>Default: <code>{}</code></li>\n<li>Since: <code>WordPress 6.3.0</code></li>\n</ul>\n<p>Any custom CSS selectors, keyed by <code>root</code>, feature, or sub-feature, to be used<br />\nwhen generating block styles for theme.json (global styles) stylesheets.<br />\nProviding custom selectors allows more fine grained control over which styles<br />\napply to what block elements, e.g. applying typography styles only to an inner<br />\nheading while colors are still applied on the outer block wrapper etc.</p>\n<p>See <a href=\"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-selectors/\">the selectors documentation</a> for more details.</p>\n<pre><code class=\"language-json\">{\n    \"selectors\": {\n        \"root\": \".my-custom-block-selector\",\n        \"color\": {\n            \"text\": \".my-custom-block-selector p\"\n        },\n        \"typography\": {\n            \"root\": \".my-custom-block-selector &gt; h2\",\n            \"text-decoration\": \".my-custom-block-selector &gt; h2 span\"\n        }\n    }\n}\n</code></pre>\n<h3>Supports</h3>\n<ul>\n<li>Type: <code>object</code></li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>supports</code></li>\n<li>Default: <code>{}</code></li>\n</ul>\n<p>It contains a set of options to control features used in the editor. See <a href=\"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-supports/\">the supports documentation</a> for more details.</p>\n<h3>Block Styles</h3>\n<ul>\n<li>Type: <code>array</code></li>\n<li>Optional</li>\n<li>Localized: Yes (<code>label</code> only)</li>\n<li>Property: <code>styles</code></li>\n<li>Default: <code>[]</code></li>\n</ul>\n<pre><code class=\"language-json\">{\n    \"styles\": [\n        { \"name\": \"default\", \"label\": \"Default\", \"isDefault\": true },\n        { \"name\": \"other\", \"label\": \"Other\" }\n    ]\n}\n</code></pre>\n<p>Block styles can be used to provide alternative styles to block. It works by adding a class name to the block&#8217;s wrapper. Using CSS, a theme developer can target the class name for the block style if it is selected.</p>\n<p>Plugins and Themes can also register <a href=\"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-styles/\">custom block styles</a> for existing blocks.</p>\n<h3>Example</h3>\n<ul>\n<li>Type: <code>object</code></li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>example</code></li>\n</ul>\n<pre><code class=\"language-json\">{\n    \"example\": {\n        \"attributes\": {\n            \"message\": \"This is a notice!\"\n        }\n    }\n}\n</code></pre>\n<p>It provides structured example data for the block. This data is used to construct a preview for the block to be shown in the Inspector Help Panel when the user mouses over the block.</p>\n<p>See the <a href=\"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/#example-optional\">Example documentation</a> for more details.</p>\n<h3>Variations</h3>\n<ul>\n<li>Type: <code>object[]|WPDefinedPath</code> (<a href=\"#wpdefinedpath\">learn more</a>)</li>\n<li>Optional</li>\n<li>Localized: Yes (<code>title</code>, <code>description</code>, and <code>keywords</code> of each variation only)</li>\n<li>Property: <code>variations</code></li>\n<li>Since: <code>WordPress 5.9.0</code></li>\n</ul>\n<pre><code class=\"language-json\">{\n    \"variations\": [\n        {\n            \"name\": \"example\",\n            \"title\": \"Example\",\n            \"attributes\": {\n                \"level\": 2,\n                \"message\": \"This is an example!\"\n            },\n            \"scope\": [ \"block\" ],\n            \"isActive\": [ \"level\" ]\n        }\n    ]\n}\n</code></pre>\n<p>Block Variations is the API that allows a block to have similar versions of it, but all these versions share some common functionality. Each block variation is differentiated from the others by setting some initial attributes or inner blocks. Then at the time when a block is inserted these attributes and/or inner blocks are applied.</p>\n<p><em>Note: In JavaScript you can provide a function for the <code>isActive</code> property, and a React element for the <code>icon</code>. In the <code>block.json</code> file both only support strings</em></p>\n<p>Starting with version 6.7, it is possible to specify a PHP file in <code>block.json</code> that generates the list of block variations on the server side:</p>\n<pre><code class=\"language-json\">{ \"variations\": \"file:./variations.php\" }\n</code></pre>\n<p>That PHP file is expected to <code>return</code> an array that contains the block variations. Strings found in the variations returned from the PHP file will not be localized automatically; instead, use the <code>__()</code> function as usual.</p>\n<p>For example:</p>\n<pre><code class=\"language-php\">&lt;?php\n// Generate variations for a Social Icon kind of block.\n\nreturn array(\n    array(\n        'isDefault'  =&gt; true,\n        'name'       =&gt; 'wordpress',\n        'title'      =&gt; 'WordPress',\n        'icon'       =&gt; 'wordpress',\n        'attributes' =&gt; array(\n            'service' =&gt; 'wordpress',\n        ),\n        'isActive'   =&gt; array( 'service' )\n    ),\n    array(\n        'name'       =&gt; 'mail',\n        'title'      =&gt; __( 'Mail' ),\n        'keywords'   =&gt; array(\n            __( 'email' ),\n            __( 'e-mail' )\n        ),\n        'icon'       =&gt; 'mail',\n        'attributes' =&gt; array(\n            'service' =&gt; 'mail',\n        ),\n        'isActive'   =&gt; array( 'mail' )\n    ),\n);\n\n</code></pre>\n<p>See <a href=\"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-variations/\">the variations documentation</a> for more details.</p>\n<h3>Block Hooks</h3>\n<ul>\n<li>Type: <code>object</code></li>\n<li>Optional</li>\n<li>Property: <code>blockHooks</code></li>\n<li>Since: <code>WordPress 6.4.0</code></li>\n</ul>\n<pre><code class=\"language-json\">{\n    \"blockHooks\": {\n        \"my-plugin/banner\": \"after\"\n    }\n}\n</code></pre>\n<p>Block Hooks is an API that allows a block to automatically insert itself next to all instances of a given block type, in a relative position also specified by the &#8220;hooked&#8221; block. That is, a block can opt to be inserted before or after a given block type, or as its first or last child (i.e. to be prepended or appended to the list of its child blocks, respectively). Hooked blocks will appear both on the frontend and in the editor (to allow for customization by the user).</p>\n<p>The key is the name of the block (<code>string</code>) to hook into, and the value is the position to hook into (<code>string</code>). Take a look at the <a href=\"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/#block-hooks-optional\">Block Hooks documentation</a> for more info about available configurations.</p>\n<h3>Editor script</h3>\n<ul>\n<li>Type: <code>WPDefinedAsset</code>|<code>WPDefinedAsset[]</code> (<a href=\"#wpdefinedasset\">learn more</a>)</li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>editorScript</code></li>\n</ul>\n<pre><code class=\"language-json\">{ \"editorScript\": \"file:./index.js\" }\n</code></pre>\n<p>Block type editor scripts definition. They will only be enqueued in the context of the editor.</p>\n<p>It&#8217;s possible to pass a script handle registered with the <a href=\"https://developer.wordpress.org/reference/functions/wp_register_script/\"><code>wp_register_script</code></a> function, a path to a JavaScript file relative to the <code>block.json</code> file, or a list with a mix of both (<a href=\"#wpdefinedasset\">learn more</a>).</p>\n<p><em>Note: An option to pass also an array of editor scripts exists since WordPress <code>6.1.0</code>.</em></p>\n<h3>Script</h3>\n<ul>\n<li>Type: <code>WPDefinedAsset</code>|<code>WPDefinedAsset[]</code> (<a href=\"#wpdefinedasset\">learn more</a>)</li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>script</code></li>\n</ul>\n<pre><code class=\"language-json\">{ \"script\": \"file:./script.js\" }\n</code></pre>\n<p>Block type frontend and editor scripts definition. They will be enqueued both in the editor and when viewing the content on the front of the site.</p>\n<p>It&#8217;s possible to pass a script handle registered with the <a href=\"https://developer.wordpress.org/reference/functions/wp_register_script/\"><code>wp_register_script</code></a> function, a path to a JavaScript file relative to the <code>block.json</code> file, or a list with a mix of both (<a href=\"#wpdefinedasset\">learn more</a>).</p>\n<p><em>Note: An option to pass also an array of scripts exists since WordPress <code>6.1.0</code>.</em></p>\n<h3>View script</h3>\n<ul>\n<li>Type: <code>WPDefinedAsset</code>|<code>WPDefinedAsset[]</code> (<a href=\"#wpdefinedasset\">learn more</a>)</li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>viewScript</code></li>\n<li>Since: <code>WordPress 5.9.0</code></li>\n</ul>\n<pre><code class=\"language-json\">{ \"viewScript\": [ \"file:./view.js\", \"example-shared-view-script\" ] }\n</code></pre>\n<p>Block type frontend scripts definition. They will be enqueued only when viewing the content on the front of the site.</p>\n<p>It&#8217;s possible to pass a script handle registered with the <a href=\"https://developer.wordpress.org/reference/functions/wp_register_script/\"><code>wp_register_script</code></a> function, a path to a JavaScript file relative to the <code>block.json</code> file, or a list with a mix of both (<a href=\"#wpdefinedasset\">learn more</a>).</p>\n<p><em>Note: An option to pass also an array of view scripts exists since WordPress <code>6.1.0</code>.</em></p>\n<h3>View script module</h3>\n<ul>\n<li>Type: <code>WPDefinedAsset</code>|<code>WPDefinedAsset[]</code> (<a href=\"#wpdefinedasset\">learn more</a>)</li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>viewScriptModule</code></li>\n<li>Since: <code>WordPress 6.5.0</code></li>\n</ul>\n<pre><code class=\"language-json\">{ \"viewScriptModule\": [ \"file:./view.js\", \"example-shared-script-module-id\" ] }\n</code></pre>\n<p>Block type frontend script module definition. They will be enqueued only when viewing the content on the front of the site.</p>\n<p>It&#8217;s possible to pass a script module ID registered with the <a href=\"https://developer.wordpress.org/reference/functions/wp_register_script_module/\"><code>wp_register_script_module</code></a> function, a path to a JavaScript module relative to the <code>block.json</code> file, or a list with a mix of both (<a href=\"#wpdefinedasset\">learn more</a>).</p>\n<p>WordPress scripts and WordPress script modules are not compatible at the moment. If frontend view assets depend on WordPress scripts, <code>viewScript</code> should be used. If they depend on WordPress script modules \u2014the Interactivity API at this time\u2014 <code>viewScriptModule</code> should be used. <a href=\"https://core.trac.wordpress.org/ticket/60647\">More functionality</a> will gradually become available to Script Modules.</p>\n<p><em>Note: Available since WordPress <code>6.5.0</code>.</em></p>\n<h3>Editor style</h3>\n<ul>\n<li>Type: <code>WPDefinedAsset</code>|<code>WPDefinedAsset[]</code> (<a href=\"#wpdefinedasset\">learn more</a>)</li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>editorStyle</code></li>\n</ul>\n<pre><code class=\"language-json\">{ \"editorStyle\": \"file:./index.css\" }\n</code></pre>\n<p>Block type editor styles definition. They will only be enqueued in the context of the editor.</p>\n<p>It&#8217;s possible to pass a style handle registered with the <a href=\"https://developer.wordpress.org/reference/functions/wp_register_style/\"><code>wp_register_style</code></a> function, a path to a CSS file relative to the <code>block.json</code> file, or a list with a mix of both (<a href=\"#wpdefinedasset\">learn more</a>).</p>\n<p><em>Note: An option to pass also an array of editor styles exists since WordPress <code>5.9.0</code>.</em></p>\n<h3>Style</h3>\n<ul>\n<li>Type: <code>WPDefinedAsset</code>|<code>WPDefinedAsset[]</code> (<a href=\"#wpdefinedasset\">learn more</a>)</li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>style</code></li>\n</ul>\n<pre><code class=\"language-json\">{ \"style\": [ \"file:./style.css\", \"example-shared-style\" ] }\n</code></pre>\n<p>Block type frontend and editor styles definition. They will be enqueued both in the editor and when viewing the content on the front of the site.</p>\n<p>It&#8217;s possible to pass a style handle registered with the <a href=\"https://developer.wordpress.org/reference/functions/wp_register_style/\"><code>wp_register_style</code></a> function, a path to a CSS file relative to the <code>block.json</code> file, or a list with a mix of both (<a href=\"#wpdefinedasset\">learn more</a>).</p>\n<p><em>Note: An option to pass also an array of styles exists since WordPress <code>5.9.0</code>.</em></p>\n<h3>View Style</h3>\n<ul>\n<li>Type: <code>WPDefinedAsset</code>|<code>WPDefinedAsset[]</code> (<a href=\"#wpdefinedasset\">learn more</a>)</li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>viewStyle</code></li>\n<li>Since: <code>WordPress 6.5.0</code></li>\n</ul>\n<pre><code class=\"language-json\">{ \"viewStyle\": [ \"file:./view.css\", \"example-view-style\" ] }\n</code></pre>\n<p>Block type frontend styles definition. They will be enqueued only when viewing the content on the front of the site.</p>\n<p>It&#8217;s possible to pass a style handle registered with the <a href=\"https://developer.wordpress.org/reference/functions/wp_register_style/\"><code>wp_register_style</code></a> function, a path to a CSS file relative to the <code>block.json</code> file, or a list with a mix of both (<a href=\"#wpdefinedasset\">learn more</a>).</p>\n<p>Frontend-only styles are especially useful for interactive blocks, to style parts that will only be visible after a user performs some action and where those styles will never be needed in the editor. You can start with using the <code>style</code> property to put all your common styles in one stylesheet. Only when you need editor-specific styling or frontend-specific styling, you can expand to <code>editorStyle</code> and <code>viewStyle</code>, but still keep the common part of your styling in the main stylesheet.</p>\n<h3>Render</h3>\n<ul>\n<li>Type: <code>WPDefinedPath</code> (<a href=\"#wpdefinedpath\">learn more</a>)</li>\n<li>Optional</li>\n<li>Localized: No</li>\n<li>Property: <code>render</code></li>\n<li>Since: <code>WordPress 6.1.0</code></li>\n</ul>\n<pre><code class=\"language-json\">{ \"render\": \"file:./render.php\" }\n</code></pre>\n<p>PHP file to use when rendering the block type on the server to show on the front end. The following variables are exposed to the file:</p>\n<ul>\n<li><code>$attributes</code> (<code>array</code>): The block attributes.</li>\n<li><code>$content</code> (<code>string</code>): The block default content.</li>\n<li><code>$block</code> (<code>WP_Block</code>): The block instance.</li>\n</ul>\n<p>An example implementation of the <code>render.php</code> file defined with <code>render</code> could look like:</p>\n<pre><code class=\"language-php\">&lt;div &lt;?php echo get_block_wrapper_attributes(); ?&gt;&gt;\n    &lt;?php echo esc_html( $attributes['label'] ); ?&gt;\n&lt;/div&gt;\n</code></pre>\n<p><em>Note: This file loads for every instance of the block type when rendering the page HTML on the server. Accounting for that is essential when declaring functions or classes in the file. The simplest way to avoid the risk of errors is to consume that shared logic from another file.</em></p>\n<h2>Assets</h2>\n<h3><code>WPDefinedPath</code></h3>\n<p>The <code>WPDefinedPath</code> type is a subtype of string, where the value represents a path to a JavaScript, CSS or PHP file relative to where the <code>block.json</code> file is located. The path provided must be prefixed with <code>file:</code>. This approach is based on how npm handles <a href=\"https://docs.npmjs.com/files/package.json#local-paths\">local paths</a> for packages.</p>\n<p><strong>Example:</strong></p>\n<p>In <code>block.json</code>:</p>\n<pre><code class=\"language-json\">{\n    \"render\": \"file:./render.php\"\n}\n</code></pre>\n<h3><code>WPDefinedAsset</code></h3>\n<p>It extends <code>WPDefinedPath</code> for JavaScript and CSS files. An alternative to the file path would be a script handle, script module ID, or style handle referencing an already registered asset using WordPress helpers.</p>\n<p><strong>Example:</strong></p>\n<p>In <code>block.json</code>:</p>\n<pre><code class=\"language-json\">{\n    \"editorScript\": \"file:./index.js\",\n    \"script\": \"file:./script.js\",\n    \"viewScriptModule\": [\n        \"file:./view.js\",\n        \"example-registered-script-module-id\"\n    ],\n    \"editorStyle\": \"file:./index.css\",\n    \"style\": [ \"file:./style.css\", \"example-shared-style\" ],\n    \"viewStyle\": [ \"file:./view.css\", \"example-view-style\" ]\n}\n</code></pre>\n<p>In the context of WordPress, when a block is registered with PHP, it will automatically register all scripts, script modules, and styles that are found in the <code>block.json</code> file and use file paths rather than asset handles.</p>\n<p>That&#8217;s why the <code>WPDefinedAsset</code> type has to offer a way to mirror the parameters necessary to register scripts, script modules, and styles using <a href=\"https://developer.wordpress.org/reference/functions/wp_register_script/\"><code>wp_register_script</code></a>, <a href=\"https://developer.wordpress.org/reference/functions/wp_register_script_module/\"><code>wp_register_script_module</code></a>, and <a href=\"https://developer.wordpress.org/reference/functions/wp_register_style/\"><code>wp_register_style</code></a>, and then assign these as handles or script module IDs associated with the block.</p>\n<p>It&#8217;s possible to provide an object which takes the following shape:</p>\n<ul>\n<li><code>handle</code> (<code>string</code>) &#8211; the name of the script. If omitted, it will be auto-generated.</li>\n<li><code>dependencies</code> (<code>string[]</code>|<code>{ id: string, import?: 'dynamic'|'static' }[]</code>) &#8211; an array of registered script handles this script depends on. Script modules may use a simple string for static dependencies or the object form to indicate a dynamic dependency. Dynamic dependencies are dependencies that may or may not be used at runtime and are typically used with the dynamic <code>import('module-id')</code> syntax. Default value: <code>[]</code>.</li>\n<li><code>version</code> (<code>string</code>|<code>false</code>|<code>null</code>) &#8211; string specifying the script version number, if it has one, which is added to the URL as a query string for cache busting purposes. If the version is set to <code>false</code>, a version number is automatically added equal to the currently installed WordPress version. If set to <code>null</code>, no version is added. Default value: <code>false</code>.</li>\n</ul>\n<p>The definition is stored inside a separate PHP file which ends with <code>.asset.php</code> and is located next to the JS/CSS file listed in <code>block.json</code>. WordPress will automatically detect this file through pattern matching. This option is the preferred one as it is expected it will become an option to auto-generate those asset files with <code>@wordpress/scripts</code> package.</p>\n<p><strong>Example:</strong></p>\n<pre><code>build/\n\u251c\u2500 block.json\n\u251c\u2500 index.js\n\u2514\u2500 index.asset.php\n</code></pre>\n<p>In <code>block.json</code>:</p>\n<pre><code class=\"language-json\">{ \"editorScript\": \"file:./index.js\" }\n</code></pre>\n<p>In <code>build/index.asset.php</code>:</p>\n<pre><code class=\"language-php\">&lt;?php\nreturn array(\n    'dependencies' =&gt; array(\n        'react',\n        'wp-blocks',\n        'wp-i18n',\n    ),\n    'version'      =&gt; '3be55b05081a63d8f9d0ecb466c42cfd',\n);\n</code></pre>\n<h3>Frontend enqueueing</h3>\n<p>Starting in the WordPress 5.8 release, it is possible to instruct WordPress to enqueue scripts and styles for a block type only when rendered on the frontend. It applies to the following asset fields in the <code>block.json</code> file:</p>\n<ul>\n<li><code>script</code></li>\n<li><code>viewScript</code></li>\n<li><code>style</code></li>\n<li><code>viewStyle</code> (Added in WordPress 6.5.0)</li>\n</ul>\n<h2>Internationalization</h2>\n<p>WordPress string discovery system can automatically translate fields marked in this document as translatable. First, you need to set the <code>textdomain</code> property in the <code>block.json</code> file that provides block metadata.</p>\n<p><strong>Example:</strong></p>\n<pre><code class=\"language-json\">{\n    \"title\": \"My block\",\n    \"description\": \"My block is fantastic\",\n    \"keywords\": [ \"fantastic\" ],\n    \"textdomain\": \"my-plugin\"\n}\n</code></pre>\n<h3>PHP</h3>\n<p>In PHP, localized properties will be automatically wrapped in <code>_x</code> function calls on the backend of WordPress when executing <code>register_block_type</code>. These translations get added as an inline script to the plugin&#8217;s script handle or to the <code>wp-block-library</code> script handle in WordPress core.</p>\n<p>The way <code>register_block_type</code> processes translatable values is roughly equivalent to the following code snippet:</p>\n<pre><code class=\"language-php\">&lt;?php\n$metadata = array(\n    'title'       =&gt; _x( 'My block', 'block title', 'my-plugin' ),\n    'description' =&gt; _x( 'My block is fantastic!', 'block description', 'my-plugin' ),\n    'keywords'    =&gt; array( _x( 'fantastic', 'block keyword', 'my-plugin' ) ),\n);\n</code></pre>\n<p>Implementation follows the existing <a href=\"https://developer.wordpress.org/reference/functions/get_plugin_data\">get_plugin_data</a> function which parses the plugin contents to retrieve the plugin\u2019s metadata, and it applies translations dynamically.</p>\n<h3>JavaScript</h3>\n<p>In JavaScript, you can use <code>registerBlockType</code> method from <code>@wordpress/blocks</code> package and pass the metadata object loaded from <code>block.json</code> as the first param. All localized properties get automatically wrapped in <code>_x</code> (from <code>@wordpress/i18n</code> package) function calls similar to how it works in PHP.</p>\n<p><strong>Example:</strong></p>\n<pre><code class=\"language-js\">import { registerBlockType } from '@wordpress/blocks';\nimport Edit from './edit';\nimport metadata from './block.json';\n\nregisterBlockType( metadata, {\n    edit: Edit,\n    // ...other client-side settings\n} );\n</code></pre>\n<h2>Backward compatibility</h2>\n<p>The existing registration mechanism (both server side and frontend) will continue to work, it will serve as low-level implementation detail for the <code>block.json</code> based registration.</p>\n<p>Once all details are ready, Core Blocks will be migrated iteratively and third-party blocks will see warnings appearing in the console to encourage them to refactor the block registration API used.</p>\n<p>The following properties are going to be supported for backward compatibility reasons on the client-side only. Some of them might be replaced with alternative APIs in the future:</p>\n<ul>\n<li><code>edit</code> &#8211; see the <a href=\"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-edit-save/\">Edit and Save</a> documentation for more details.</li>\n<li><code>save</code> &#8211; see the <a href=\"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-edit-save/\">Edit and Save</a> documentation for more details.</li>\n<li><code>transforms</code> &#8211; see the <a href=\"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/#transforms-optional\">Transforms</a> documentation for more details.</li>\n<li><code>deprecated</code> &#8211; see the <a href=\"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-deprecation/\">Deprecated Blocks</a> documentation for more details.</li>\n<li><code>merge</code> &#8211; undocumented as of today. Its role is to handle merging multiple blocks into one.</li>\n<li><code>getEditWrapperProps</code> &#8211; undocumented as well. Its role is to inject additional props to the block edit&#8217;s component wrapper.</li>\n</ul>\n<p><strong>Example</strong>:</p>\n<pre><code class=\"language-js\">import { registerBlockType } from '@wordpress/blocks';\n\nregisterBlockType( 'my-plugin/block-name', {\n    edit: function () {\n        // Edit definition goes here.\n    },\n    save: function () {\n        // Save definition goes here.\n    },\n    getEditWrapperProps: function () {\n        // Implementation goes here.\n    },\n} );\n</code></pre>\n<p>In the case of <a href=\"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/creating-dynamic-blocks/\">dynamic blocks</a> supported by WordPress, it should still be possible to register the <code>render_callback</code> property using both <a href=\"https://developer.wordpress.org/reference/functions/register_block_type/\"><code>register_block_type</code></a> functions on the server.</p>\n",
        "protected": false
    },
    "author": 0,
    "featured_media": 0,
    "parent": 134406,
    "menu_order": 66,
    "template": "",
    "meta": {
        "footnotes": ""
    },
    "class_list": [
        "post-135623",
        "blocks-handbook",
        "type-blocks-handbook",
        "status-publish",
        "hentry",
        "type-handbook"
    ],
    "revision_note": "",
    "jetpack_sharing_enabled": true,
    "_links": {
        "self": [
            {
                "href": "https://developer.wordpress.org/wp-json/wp/v2/blocks-handbook/135623",
                "targetHints": {
                    "allow": [
                        "GET"
                    ]
                }
            }
        ],
        "collection": [
            {
                "href": "https://developer.wordpress.org/wp-json/wp/v2/blocks-handbook"
            }
        ],
        "about": [
            {
                "href": "https://developer.wordpress.org/wp-json/wp/v2/types/blocks-handbook"
            }
        ],
        "version-history": [
            {
                "count": 54,
                "href": "https://developer.wordpress.org/wp-json/wp/v2/blocks-handbook/135623/revisions"
            }
        ],
        "predecessor-version": [
            {
                "id": 154032,
                "href": "https://developer.wordpress.org/wp-json/wp/v2/blocks-handbook/135623/revisions/154032"
            }
        ],
        "up": [
            {
                "embeddable": true,
                "href": "https://developer.wordpress.org/wp-json/wp/v2/blocks-handbook/134406"
            }
        ],
        "wp:attachment": [
            {
                "href": "https://developer.wordpress.org/wp-json/wp/v2/media?parent=135623"
            }
        ],
        "curies": [
            {
                "name": "wp",
                "href": "https://api.w.org/{rel}",
                "templated": true
            }
        ]
    }
}